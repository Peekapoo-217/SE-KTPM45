## Use Case Diagram mô tả BankStatementAnalyzer
![markdown](https://www.planttext.com/api/plantuml/png/R95DJiCm48NtFiMe-mZomnOLghAYKgKq1nXI4wouusfcBF4ZJiQ28t45759K8kBDwBtv_3JsV7ryBaMHDHwymLO3GoEM0GKsoFsQ7onthx7jZObYMnGBYnNwDdfK2xkWw67BuT7fnNqGMGmNc_mF6o8fx1X9KheB9E0843Q1z6caYpDzvsYVGezPVWdhvwCbiQV8yZy4TGBsZZfOfLcwm2yZMftHBN8gjqWzr9gWWoKz1LuPmxPLfCudehw1DmFfD3basVNG_b75H9KJLVsgTsEcVpKsybctc7NBMRSoo_J2OJFV0000__y30000)

---

## Package Diagram mô tả các gói giải quyết các Usecase

![markdown](https://www.planttext.com/api/plantuml/png/r5RBRjim4BphAtXq04T8haLXn8qTe42I6fNG7WkQMZj4H58WLq6LDb_MGp-flz2Lh4OlghPxIQg3B92pipkSvSA_VloySCWjvYeDCYxk-HQOC2fK1RqphejmpVKzMguT5oYDVW3hwEViF5GcWPHz2nWz8kNEiNS4ZHjelLS-f-pQ29ukE09BwFLXqyArK8d9roamhaokiRKUePLwon9mmigi4yJwQIT_IJNjPfXwY4zQp0tJ5d3H9vkqeJKluUOLTMUppbAID8by23IxZthlANWAZhM5QvuMZs07paH80XHed7SHjLJfy6tl96Ti8tKIc-pyRFar0-t0JVouLYNE8wkakQJiMsEBpnBlRep3Y0YJKkgXZ7GKewqMvKfnAn-XewdsX3mKUKhfRm5Nrcma7gaYDQH1bAwsuEwzlZ4QxmxWcZAfaQaIlViiWDj_TpZZrZsxHtHWDrn0r-DL6-Ez9goYkR96NKQV9hLHgTHmihShgiXhWhe_uHLknp6hICOyUowGekeQfShIQidjaN3AQ5IX5AoyYR5KS6MiuaZwsM8UBx-ivd6y_7ZxufAFTvHqFaW1urUMsbQ0SwPx7AENO3soqOiTJeIrRxLteCEYV8FmDL-w_sVYKIlvZGh3sQ2xtx2SwWr6ks9FZAVPF14DtM6Xmz9zSSqq2CFlCzyS6CVxH0aBX7J11Pru-TVcDm000F__0m00)

---

# SEQUENCE DIAGRAM

## Use Case CalcualteNetProfit
![markdown](https://www.planttext.com/api/plantuml/png/V9AnJiCm48PtFyMf4nqGUuMgYee12QIA0llLlLPk7BlSdHdwQWmy4g-0aqXEarPCyLd_b_-paz_lduKeigRQ6xGQ6Tw5653W1Rbwv0tn_fHiPOuvvAmxOb2OF62erefADGLTSRGa4ddIO6Mw9DuOW-GI5yCwrJMoEr7BbEaAL6gMwuyLSfRhQjhblnrjxcmsPdWak9ttjZDufSz4eg0HB7gRVEw58yUTqpiVHKp9jc3RF-kUaDrWvpoPRhi9d1NFOCdKl6qa275p8AjIgB6G9Wxmx4JlH-JS36tw2ynTHLwZeXySeSzTA3ufSGlrcm8OjY2f1gnZ2ZhahyfsbLqSRiwgfoFZuQSeF9Catv1HdBelWfmEjCTcFJKB2jlcH_q3003__mC0)

---

## Use case CountTransactionInMonth

![markdown](https://www.planttext.com/api/plantuml/png/V991JiCm44NtFiMeAv10x2DKLLGia42g2B2VkjFM9BR3UBoWLsF1aRW2ZeEI9grOEHFD__zz9pzVtuiWo19jhL2BPtWDn801df2hUruJxmvHLwf9IqQR1ft0x0vTLGeAMNAoOgyf1C-pLjPFfueNHXTIYF6kZDOYcmDbJJ-T4VKno_9jXPpWkfZy-6z6tZkQbHfNWklvG5l0Ctr42WBQnsJcjo23D81nW10QqcPhD5ZlPAzwSNRAG4LtGeA5hQb9TQ_RXIEI0fPCgHPCYC6ltqbBw5LJGediuD44kPqevsfCCzneoig5fcro1RZ8nnLy4lAb6bGdm0z2t1AFRD1j_gxBekYzSRlEzgQr6xcTBPAb4_3n9ngl0bE8jQW5kKtxl_u2003__mC0)

---


## Use case findTop10Expenses

![markdown](https://www.planttext.com/api/plantuml/png/X9BFJiCm3CRlUGfh9pXCWck5fi74JY1DR73tEZE5jacnNSJsQXnu95w1TALT_sZZb3Z-Flld93zVtrDHP2sor62idk5PY0457f6JUruJR_T5d9WyY6niStGAepjqoL9HAIEd2_OnYNWUbROcEkEuTPZkzbGPwk2CVhPyMI3Bdw7Q3kKhHYTX1klTGTUAZUbE0-F94JI29telI1JKv-FhAw3Fd9oGc4Poq1_QHjKA0GbURKgcEYu5hNuHp9W2FFIumA_VA5PfN7qEBTZ1WnMzwJadfajJtre4S-is0_8wFU2QsrJBzmsUK2cCV4mAh7U0cI_2XLuusgBQ3xfibJeDkwhQ_yFSVOEcGeyTqb3HJCbjoZ_v2m00__y30000)

### SRP:

#### **Tách từng chức năng thành các lớp riêng biệt:**
  - Đọc dữ liệu đầu vào.
  - Phân tích (parsing) dữ liệu từ tệp CSV.
  - Xử lý kết quả.
  - Báo cáo kết quả.
- Để tuân thủ nguyên tắc SRP, tác giả tách phần logic phân tích dữ liệu CSV ra thành một lớp riêng biệt có tên `BankStatementCSVParser`.

#### **Tạo lớp `BankStatementCSVParser`:**
- Lớp này chịu trách nhiệm duy nhất là phân tích dữ liệu CSV và chuyển đổi sang đối tượng `BankTransaction`.
- Tác giả triển khai hai phương thức chính:
  - `parseFromCSV(String line)`: Phân tích một dòng CSV để tạo một đối tượng `BankTransaction`.
  - `parseLinesFromCSV(List<String> lines)`: Phân tích danh sách các dòng CSV và trả về danh sách các đối tượng `BankTransaction`.
- Việc này giúp loại bỏ các trách nhiệm không liên quan khỏi lớp chính, giúp các thành phần khác có thể tái sử dụng mà không cần hiểu chi tiết việc phân tích CSV.

#### **Định nghĩa lớp `BankTransaction`:**
- Lớp này được dùng để mô hình hóa một giao dịch ngân hàng với các thuộc tính như:
  - Ngày (`date`)
  - Số tiền (`amount`)
  - Mô tả (`description`)
- `BankTransaction` chỉ có trách nhiệm duy nhất là biểu diễn dữ liệu của một giao dịch, không liên quan đến logic xử lý hay phân tích.

---

### **Tóm lại:**
Tác giả đã giải quyết vấn đề bằng cách chia nhỏ trách nhiệm vào các lớp riêng biệt, đảm bảo rằng mỗi lớp chỉ có **một lý do để thay đổi**, qua đó tuân thủ nguyên tắc **Single Responsibility Principle (SRP)**.
---


### Cohesion
### Vấn đề ban đầu về Cohesion:
- Trong phiên bản đầu tiên, class `BankStatementAnalyzer` chứa nhiều trách nhiệm:
  - Kết nối các phần của ứng dụng (parser, calculations, reporting).
  - Thực hiện các phép tính tổng (như tổng số tiền, số tiền trong tháng, tổng theo danh mục).
- Việc gộp các phép tính vào `BankStatementAnalyzer` làm giảm cohesion vì các phép tính không liên quan trực tiếp đến trách nhiệm chính của class là **phân tích và báo cáo dữ liệu**.

### Cách giải quyết để tăng Cohesion:
- Tác giả tách các phép tính (**calculations**) ra khỏi `BankStatementAnalyzer` và đưa chúng vào một class riêng gọi là `BankStatementProcessor`.
- Class `BankStatementProcessor` tập trung vào một nhiệm vụ cụ thể: thực hiện các phép tính liên quan đến danh sách giao dịch (`bankTransactions`).

### Class `BankStatementProcessor` có cohesion cao:
- Tất cả các phương thức trong `BankStatementProcessor` đều tập trung xử lý danh sách giao dịch (`bankTransactions`), chẳng hạn:
  - `calculateTotalAmount()`: Tính tổng số tiền.
  - `calculateTotalInMonth(Month month)`: Tính tổng số tiền trong một tháng cụ thể.
  - `calculateTotalForCategory(String category)`: Tính tổng số tiền theo danh mục.
- Việc đưa danh sách giao dịch (`bankTransactions`) làm thuộc tính của class giúp loại bỏ việc truyền tham số dài dòng giữa các phương thức.

=> Tách Class BankStatementAnalyzer thành một lớp riêng là BankStatementProcessor


### Coupling giữa `BankStatementAnalyzer` và `BankStatementCSVParser`:
- `BankStatementAnalyzer` gọi `BankStatementCSVParser` để phân tích file CSV và tạo danh sách giao dịch.
- Đây là coupling hợp lý, vì nhiệm vụ phân tích dữ liệu CSV được đóng gói hoàn toàn trong `BankStatementCSVParser`.
- Nếu cần thay đổi định dạng đầu vào (ví dụ từ CSV sang JSON), bạn chỉ cần thay thế `BankStatementCSVParser` bằng một lớp parser khác mà không ảnh hưởng đến `BankStatementAnalyzer`.




